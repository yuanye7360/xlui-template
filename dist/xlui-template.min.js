!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("async-validator"),require("vue")):"function"==typeof define&&define.amd?define(["exports","async-validator","vue"],e):e((n="undefined"!=typeof globalThis?globalThis:n||self)["xlui-template"]={},n.AsyncValidator,n.Vue)}(this,(function(n,e,t){"use strict";function i(n){return n&&"object"==typeof n&&"default"in n?n:{default:n}}var a=i(e),o=i(t),r={name:"xlForm",props:{model:{type:Object,default:function(){}},rules:{type:Object,default:function(){}}},provide:function(){return{FormInstance:this}},data:function(){return{fields:[]}},created:function(){var n=this;this.$on("on-form-item-add",(function(e){e&&n.fields.push(e)})),this.$on("on-form-item-remove",(function(e){e.prop&&n.fields.splice(n.fields.indexOf(e),1)}))},methods:{validate:function(n){var e=this;return new Promise((function(t){var i=!0,a=0;e.fields.forEach((function(o){o.validate("",(function(o){o&&(i=!1),++a===e.fields.length&&(t(i),"function"==typeof n&&n(i))}))}))}))}}};function s(n,e,t,i,a,o,r,s,d,l){"boolean"!=typeof r&&(d=s,s=r,r=!1);var c,u="function"==typeof t?t.options:t;if(n&&n.render&&(u.render=n.render,u.staticRenderFns=n.staticRenderFns,u._compiled=!0,a&&(u.functional=!0)),i&&(u._scopeId=i),o?(c=function(n){(n=n||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(n=__VUE_SSR_CONTEXT__),e&&e.call(this,d(n)),n&&n._registeredComponents&&n._registeredComponents.add(o)},u._ssrRegister=c):e&&(c=r?function(n){e.call(this,l(n,this.$root.$options.shadowRoot))}:function(n){e.call(this,s(n))}),c)if(u.functional){var h=u.render;u.render=function(n,e){return c.call(e),h(n,e)}}else{var p=u.beforeCreate;u.beforeCreate=p?[].concat(p,c):[c]}return t}var d,l="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());function c(n){return function(n,e){return function(n,e){var t=l?e.media||"default":n,i=u[t]||(u[t]={ids:new Set,styles:[]});if(!i.ids.has(n)){i.ids.add(n);var a=e.source;if(e.map&&(a+="\n/*# sourceURL="+e.map.sources[0]+" */",a+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e.map))))+" */"),i.element||(i.element=document.createElement("style"),i.element.type="text/css",e.media&&i.element.setAttribute("media",e.media),void 0===d&&(d=document.head||document.getElementsByTagName("head")[0]),d.appendChild(i.element)),"styleSheet"in i.element)i.styles.push(a),i.element.styleSheet.cssText=i.styles.filter(Boolean).join("\n");else{var o=i.ids.size-1,r=document.createTextNode(a),s=i.element.childNodes;s[o]&&i.element.removeChild(s[o]),s.length?i.element.insertBefore(r,s[o]):i.element.appendChild(r)}}}(n,e)}}var u={};var h=r,p=function(){var n=this.$createElement;return(this._self._c||n)("form",[this._t("default")],2)};p._withStripped=!0;var f=s({render:p,staticRenderFns:[]},(function(n){n&&n("data-v-4c8a40e6_0",{source:"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",map:{version:3,sources:[],names:[],mappings:"",file:"Form.vue"},media:void 0})}),h,"data-v-4c8a40e6",!1,void 0,!1,c,void 0,void 0);function m(n,e,t){this.$children.forEach((function(i){i.$options.name===n?i.$emit.apply(i,[e].concat(t)):m.apply(i,[n,e].concat([t]))}))}f.install=function(n){n.component("Form",f)};var v={methods:{dispatch:function(n,e,t){for(var i=this.$parent||this.$root,a=i.$options.name;i&&(!a||a!==n);)(i=i.$parent)&&(a=i.$options.name);i&&i.$emit.apply(i,[e].concat(t))},broadcast:function(n,e,t){m.call(this,n,e,t)}}},b={name:"xlFormItem",mixins:[v],props:{label:{type:String,default:""},prop:{type:String,default:""}},inject:["FormInstance"],data:function(){return{isRequired:!1,validateState:"",validateMessage:""}},computed:{fieldValue:function(){return this.FormInstance.model[this.prop]}},mounted:function(){this.prop&&(this.initialValue=this.fieldValue,this.dispatch("xlForm","on-form-item-add",this),this.setRules())},beforeDestroy:function(){this.dispatch("xlForm","on-form-item-remove",this)},methods:{setRules:function(){var n=this,e=this.getRules();e.length&&this.required||(e.length?e.every((function(e){n.isRequired=e.required})):this.required&&(this.isRequired=this.required),this.$off("on-form-blur",this.onFieldBlur),this.$off("on-form-change",this.onFieldChange),this.$on("on-form-blur",this.onFieldBlur),this.$on("on-form-change",this.onFieldChange))},getRules:function(){var n=this.FormInstance.rules,e=this.rules;return n=n?n[this.prop]:[],[].concat(e||n||[])},getFilteredRule:function(n){return this.getRules().filter((function(e){return!e.trigger||-1!==e.trigger.indexOf(n)}))},validate:function(n,e){var t=this;void 0===e&&(e=function(){});var i=this.getFilteredRule(n);if(!i||0===i.length){if(!this.required)return e(),!0;i=[{required:!0}]}this.validateState="validating";var o={};o[this.prop]=i;var r=new a.default(o),s={};s[this.prop]=this.fieldValue,r.validate(s,{firstFields:!0},(function(n){t.validateState=n?"error":"success",t.validateMessage=n?n[0].message:"",e(t.validateMessage),t.FormInstance&&t.FormInstance.$emit("on-validate",t.prop,!n,t.validateMessage||null)})),this.validateDisabled=!1},onFieldBlur:function(){this.validate("blur")},onFieldChange:function(){this.validateDisabled?this.validateDisabled=!1:this.validate("change")},resetField:function(){this.validateState="",this.validateMessage="",this.form.model[this.prop]=this.initialValue}}},_=function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",[n.label?t("label",{class:{"xl-form-item-label-required":n.isRequired}},[n._v(n._s(n.label))]):n._e(),n._v(" "),t("div",[n._t("default"),n._v(" "),"error"===n.validateState?t("div",{staticClass:"xl-form-item-message"},[n._v(n._s(n.validateMessage))]):n._e()],2)])};_._withStripped=!0;var g=s({render:_,staticRenderFns:[]},(function(n){n&&n("data-v-49b7de6c_0",{source:"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",map:{version:3,sources:[],names:[],mappings:"",file:"FormItem.vue"},media:void 0})}),b,"data-v-49b7de6c",!1,void 0,!1,c,void 0,void 0);function x(n,e){for(var t=n.$parent,i=t.$options.name;t&&(!i||[e].indexOf(i)<0);)(t=t.$parent)&&(i=t.$options.name);return t}function y(n){var e,t,i=(e=n,{"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regExp","[object Undefined]":"undefined","[object Null]":"null","[object Object]":"object"}[Object.prototype.toString.call(e)]);if("array"===i)t=[];else{if("object"!==i)return n;t={}}if("array"===i)for(var a=0;a<n.length;a++)t.push(y(n[a]));else if("object"===i)for(var o in n)t[o]=y(n[o]);return t}g.install=function(n){n.component("FormItem",g)};var w={name:"xlCheckbox",mixins:[v],props:{disabled:{type:Boolean,default:!1},label:{type:[String,Number,Boolean]},value:{type:[String,Number,Boolean],default:!1},trueValue:{type:[String,Number,Boolean],default:!0},falseValue:{type:[String,Number,Boolean],default:!1},showSlot:{type:Boolean,default:!0}},data:function(){return{currentValue:this.value,model:[],group:!1,parent:null}},mounted:function(){this.parent=x(this,"xlCheckboxGroup"),this.parent&&(this.group=!0),this.group?this.parent.updateModel(!0):this.updateModel()},methods:{onChange:function(n){if(this.disabled)return!1;var e=n.target.checked;this.currentValue=e;var t=e?this.trueValue:this.falseValue;this.$emit("input",t),this.group?this.parent.change(this.model):(this.$emit("on-change",t),this.dispatch("xlFormItem","on-form-change",t))},updateModel:function(){this.currentValue=this.value===this.trueValue}},watch:{value:function(n){if(n!==this.trueValue&&n!==this.falseValue)throw"Value should be trueValue or falseValue.";this.updateModel()}}},$=function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("label",[t("span",[n.group?t("input",{directives:[{name:"model",rawName:"v-model",value:n.model,expression:"model"}],attrs:{type:"checkbox",disabled:n.disabled},domProps:{value:n.label,checked:n.currentValue,checked:Array.isArray(n.model)?n._i(n.model,n.label)>-1:n.model},on:{change:[function(e){var t=n.model,i=e.target,a=!!i.checked;if(Array.isArray(t)){var o=n.label,r=n._i(t,o);i.checked?r<0&&(n.model=t.concat([o])):r>-1&&(n.model=t.slice(0,r).concat(t.slice(r+1)))}else n.model=a},n.onChange]}}):t("input",{attrs:{type:"checkbox",disabled:n.disabled},domProps:{checked:n.currentValue},on:{change:n.onChange}})]),n._v(" "),n._t("default",[n.showSlot?t("span",[n._v(n._s(n.label))]):n._e()])],2)};$._withStripped=!0;var C=s({render:$,staticRenderFns:[]},(function(n){n&&n("data-v-55631b34_0",{source:"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",map:{version:3,sources:[],names:[],mappings:"",file:"Checkbox.vue"},media:void 0})}),w,"data-v-55631b34",!1,void 0,!1,c,void 0,void 0);C.install=function(n){n.component("Checkbox",C)};var k={name:"xlCheckboxGroup",mixins:[v],props:{value:{type:Array,default:function(){return[]}}},data:function(){return{currentValue:this.value,childrens:[]}},mounted:function(){this.updateModel(!0)},methods:{updateModel:function(n){if(this.childrens=function n(e,t){return e.$children.reduce((function(e,i){i.$options.name===t&&e.push(i);var a=n(i,t);return e.concat(a)}),[])}(this,"xlCheckbox"),this.childrens){var e=this.value;this.childrens.forEach((function(t){t.model=e,n&&(t.currentValue=e.indexOf(t.label)>=0,t.group=!0)}))}},change:function(n){this.currentValue=n,this.$emit("input",n),this.$emit("on-change",n),this.dispatch("xlFormItem","on-form-change",n)}},watch:{value:function(){this.updateModel(!0)}}},F=function(){var n=this.$createElement;return(this._self._c||n)("div",[this._t("default")],2)};F._withStripped=!0;var S=s({render:F,staticRenderFns:[]},(function(n){n&&n("data-v-cf583280_0",{source:"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",map:{version:3,sources:[],names:[],mappings:"",file:"CheckboxGroup.vue"},media:void 0})}),k,"data-v-cf583280",!1,void 0,!1,c,void 0,void 0);S.install=function(n){n.component("CheckboxGroup",S)};var R=0;var V={name:"xlAlert",data:function(){return{notices:[]}},methods:{add:function(n){var e=this,t="alert_"+R++,i=Object.assign({name:t},n);this.notices.push(i);var a=n.duration;setTimeout((function(){e.remove(t)}),2e3*a)},remove:function(n){for(var e=this.notices,t=0;t<e.length;t++)if(e[t].name===n){this.notices.splice(t,1);break}}}},j=function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("transition-group",{staticClass:"alert",attrs:{name:"list",tag:"div"}},n._l(n.notices,(function(e){return t("div",{key:e.name,staticClass:"alert-main"},[t("div",{staticClass:"alert-content"},[n._v(n._s(e.content))])])})),0)};j._withStripped=!0;var E,I=s({render:j,staticRenderFns:[]},(function(n){n&&n("data-v-3d8c0aa7_0",{source:"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",map:{version:3,sources:[],names:[],mappings:"",file:"Alert.vue"},media:void 0})}),V,"data-v-3d8c0aa7",!1,void 0,!1,c,void 0,void 0);function T(n){var e=n.duration;void 0===e&&(e=2);var t=n.content;void 0===t&&(t=""),(E=E||I.newInstance()).add({content:t,duration:e})}I.newInstance=function(n){var e=n||{},t=new o.default({render:function(n){return n(I,{props:e})}}),i=t.$mount();document.body.appendChild(i.$el);var a=t.$children[0];return{add:function(n){a.add(n)},remove:function(n){a.remove(n)}}};var N={info:function(n){return T("string"==typeof n?{content:n}:n)}},O={name:"xlTable",components:{Render:{functional:!0,props:{row:Object,column:Object,index:Number,render:Function},render:function(n,e){var t={row:e.props.row,column:e.props.column,index:e.props.index};return e.props.render(n,t)}},SlotScope:{functional:!0,inject:["tableRoot"],props:{row:Object,column:Object,index:Number},render:function(n,e){return n("div",e.injections.tableRoot.$scopedSlots[e.props.column.slot]({row:e.props.row,column:e.props.column,index:e.props.index}))}}},provide:function(){return{tableRoot:this}},props:{columns:{type:Array,default:function(){return[]}},data:{type:Array,default:function(){return[]}},index:{type:Number},render:{type:Function}}},B=function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("table",{staticClass:"xl-table"},[t("thead",[t("tr",n._l(n.columns,(function(e,i){return t("th",{key:i},[n._v(n._s(e.title))])})),0)]),n._v(" "),t("tbody",n._l(n.data,(function(e,i){return t("tr",{key:i},n._l(n.columns,(function(a,o){return t("td",{key:o},["render"in a?[t("Render",{attrs:{row:e,column:a,index:i,render:a.render}})]:"slot"in a?[t("SlotScope",{attrs:{row:e,column:a,index:i}})]:[n._v(n._s(e[a.key]))]],2)})),0)})),0)])};B._withStripped=!0;var D=s({render:B,staticRenderFns:[]},(function(n){n&&n("data-v-244f4766_0",{source:"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",map:{version:3,sources:[],names:[],mappings:"",file:"Table.vue"},media:void 0})}),O,"data-v-244f4766",!1,void 0,!1,c,void 0,void 0);D.install=function(n){n.component("Table",D)};var M={name:"TreeNode",components:{Checkbox:C},props:{data:{type:Object,default:function(){}},showCheckbox:{type:Boolean,default:!1}},data:function(){return{tree:x(this,"Tree")}},methods:{handleExpand:function(){this.$set(this.data,"expand",!this.data.expand),this.tree&&this.tree.emitEvent("on-toggle-expand",this.data)},handleCheck:function(n){this.updateTreeDown(this.data,n),this.tree&&this.tree.emitEvent("on-check-change",this.data)},updateTreeDown:function(n,e){var t=this;this.$set(n,"checked",e),n.children&&n.children.length&&n.children.forEach((function(n){t.updateTreeDown(n,e)}))}},watch:{"data.children":{handler:function(n){if(n){var e=n.every((function(n){return n.checked}));this.$set(this.data,"checked",e)}},deep:!0}}},A=function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("ul",{staticClass:"xl-tree-ul"},[t("li",{staticClass:"xl-tree-li"},[t("span",{staticClass:"xl-tree-expand",on:{click:n.handleExpand}},[n.data.children&&n.data.children.length&&!n.data.expand?t("span",[n._v("+")]):n._e(),n._v(" "),n.data.children&&n.data.children.length&&n.data.expand?t("span",[n._v("-")]):n._e()]),n._v(" "),n.showCheckbox?t("Checkbox",{attrs:{value:n.data.checked,showSlot:!1},on:{input:n.handleCheck}}):n._e(),n._v(" "),t("span",[n._v(n._s(n.data.title))]),n._v(" "),n.data.expand?n._l(n.data.children,(function(e,i){return t("TreeNode",{key:i,attrs:{data:e,"show-checkbox":n.showCheckbox}})})):n._e()],2)])};A._withStripped=!0;var q={name:"xlTree",components:{TreeNode:s({render:A,staticRenderFns:[]},(function(n){n&&n("data-v-0505e6da_0",{source:"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",map:{version:3,sources:[],names:[],mappings:"",file:"Node.vue"},media:void 0})}),M,"data-v-0505e6da",!1,void 0,!1,c,void 0,void 0)},props:{data:{type:Array,default:function(){return[]}},showCheckbox:{type:Boolean,default:!1}},data:function(){return{cloneData:[]}},created:function(){this.rebuildData()},watch:{data:function(){this.rebuildData()}},methods:{rebuildData:function(){this.cloneData=y(this.data)},emitEvent:function(n,e){this.$emit(n,e,this.cloneData)}}},G=function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",n._l(n.cloneData,(function(e,i){return t("tree-node",{key:i,attrs:{data:e,"show-checkbox":n.showCheckbox}})})),1)};G._withStripped=!0;var U=s({render:G,staticRenderFns:[]},void 0,q,void 0,!1,void 0,!1,void 0,void 0,void 0);U.install=function(n){n.component("Tree",U)};var P={name:"xlInput",mixins:[v],props:{value:{type:String,default:""}},data:function(){return{currentValue:this.value}},watch:{value:function(n){alert(n),this.currentValue=n}},methods:{handleInput:function(n){var e=n.target.value;this.currentValue=e,this.$emit("input",e),this.dispatch("xlFormItem","on-form-change",e)},handleBlur:function(){this.dispatch("xlFormItem","on-form-blur",this.currentValue)}}},L=function(){var n=this.$createElement;return(this._self._c||n)("input",{staticClass:"xl-input",attrs:{type:"text"},domProps:{value:this.currentValue},on:{input:this.handleInput,blur:this.handleBlur}})};L._withStripped=!0;var X=s({render:L,staticRenderFns:[]},void 0,P,void 0,!1,void 0,!1,void 0,void 0,void 0);X.install=function(n){n.component("Input",X)};var z={Form:f,FormItem:g,Checkbox:C,CheckboxGroup:S,Table:D,Tree:U,Input:X},J=function(n,e){J.installed||(Object.keys(z).forEach((function(e){n.component(e,z[e])})),n.prototype.$notification=N)};"undefined"!=typeof window&&window.Vue&&J(window.Vue);var H={version:process.env.VERSION,install:J};n.Checkbox=C,n.CheckboxGroup=S,n.Form=f,n.FormItem=g,n.Input=X,n.Table=D,n.Tree=U,n.default=H,Object.defineProperty(n,"__esModule",{value:!0})}));
//# sourceMappingURL=xlui-template.min.js.map
